<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <form id="newsletterForm">
      <label for="name">Name: </label>
      <input
        type="text"
        id="name"
        name="name"
        placeholder="Your name"
        required
      />
      <label for="email">Email: </label>
      <input
        type="email"
        id="email"
        name="email"
        placeholder="Email"
        required
      />
      <input type="submit" value="Subscribe" />
    </form>
    <button id="btnClick" style="display: none">Click me</button>

    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"
    ></script>
    <script type="text/javascript">
      (function () {
        emailjs.init("A-RZ8qEPMIr1s64QE");
      })();

      // document
      //   .getElementById("newsletterForm")
      //   .addEventListener("submit", function (event) {
      //     event.preventDefault();
      //     sendNewsletter();
      //   });
      document
        .getElementById("newsletterBtn")
        .addEventListener("click", (event) => {
          event.preventDefault();
          sendNewsletter();
        });

      function sendNewsletter() {
        const username = document.getElementById("name").value;
        const useremail = document.getElementById("email").value;

        console.log(username, useremail);

        let newsletter = {
          name: username,
          email: useremail,
        };

        emailjs.send("service_yjnqsai", "template_i2ifg2g", newsletter).then(
          () => {
            alert("Email sent successfully!");
            document.getElementById("name").value = "";
            document.getElementById("email").value = "";
          },
          (error) => {
            console.error("Email sending failed:", error);
            alert("Failed to send email. Please try again.");
          }
        );
      }
    </script>
  </body>
</html>
